process MuonAlignmentMonitor =  {

  // Input reco file
  source = PoolSource {

	//AlCaReco File
    untracked vstring fileNames = {
  "file:///pool/fanae113/RelValSingleMuPt100_216.root"

}
}
    untracked PSet maxEvents = {untracked int32 input = -1}



  include "Configuration/StandardSequences/data/GeometryPilot2.cff"
  include "Configuration/StandardSequences/data/MagneticField_38T.cff"
  include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"

# ideal geometry and interface
#  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
  include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"
  include "Geometry/CommonDetUnit/data/bareGlobalTrackingGeometry.cfi"
#  include "RecoMuon/DetLayers/data/muonDetLayerGeometry.cfi"


  // Analysis module
 module MuonAlignmentMonitor = MuonAlignmentAnalyzer {
        untracked string DataType = "RealData"
#	To do resolution plots:	
#       untracked string DataType = "SimData"  # needs g4SimHits!!!

        # range of pt/mass histograms to analyze
        untracked double ptRangeMin = 0
        untracked double ptRangeMax = 100
        untracked double invMassRangeMin = 0
        untracked double invMassRangeMax = 200

	# InputTags for AlCaRecoMuon format
	untracked bool   doSAplots = true
        InputTag StandAloneTrackCollectionTag =  standAloneMuons:UpdatedAtVtx

	untracked bool	 doGBplots = true
        InputTag GlobalMuonTrackCollectionTag = globalMuons

        untracked bool   doResplots = true
	InputTag RecHits4DDTCollectionTag = dt4DSegments
        InputTag RecHits4DCSCCollectionTag = cscSegments
	
	#residual range limits: cm and rad
        untracked double resLocalXRangeStation1 = 0.1
        untracked double resLocalXRangeStation2 = 0.3
        untracked double resLocalXRangeStation3 = 3.0
        untracked double resLocalXRangeStation4 = 3.0
        untracked double resLocalYRangeStation1 = 0.7
        untracked double resLocalYRangeStation2 = 0.7
        untracked double resLocalYRangeStation3 = 5.0
        untracked double resLocalYRangeStation4 = 5.0
        untracked double resPhiRange	       = 0.1
        untracked double resThetaRange	       = 0.1
        untracked uint32 nbins		       = 500
	untracked uint32 min1DTrackRecHitSize	= 1
	untracked uint32 min4DTrackSegmentSize = 1
 }


### Conditions (Global Tag is used here):
#include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"
#replace GlobalTag.connect = "oracle://cms_orcoff_int2r/CMS_COND_GENERAL"
#replace GlobalTag.DBParameters.authenticationPath="/cms/DB/conddb"
#replace GlobalTag.timetype = "runnumber"
replace GlobalTag.globaltag = "IDEAL_V9::All"
#es_prefer GlobalTag = PoolDBESSource {}


  service = TFileService { 
    string fileName =  "/home/jfernan/output_RelValSingleMuPt100_216.root"
  }

     path p = {MuonAlignmentMonitor}
}
