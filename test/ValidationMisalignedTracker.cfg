process VALIDATIONMISALIGNEDTRACKER = {

    include "FWCore/MessageService/data/MessageLogger.cfi"
    #service = MessageLogger
    #{
    #untracked vstring destinations = {"cout"}
    #	untracked vstring categories    = { "TrackAssociator","TrackValidator" }
    #	#untracked vstring categories    = { "TrackValidator" }
    #	untracked vstring debugModules = {"multiTrackValidator"}
    #untracked PSet cout            = {
    #untracked string threshold = "DEBUG"
    #	    #untracked PSet default   = { untracked int32 limit = 10000000  }
    #	    #untracked PSet FwkJob    = { untracked int32 limit = 0 }
    #	    #untracked PSet DDLParser = { untracked int32 limit = 0 }
    #untracked PSet default   = { untracked int32 limit = 0  }
    #	    untracked PSet INFO   = { untracked int32 limit = 0  }
    #	    untracked PSet DEBUG  = { untracked int32 limit = 0  }
    #	    untracked PSet TrackAssociator = { untracked int32 limit = 10000000 }
    #	    untracked PSet TrackValidator = { untracked int32 limit = 10000000 }
    #}
    #}

    untracked PSet maxEvents = {untracked int32 input = -1}
    source = PoolSource { 
	untracked vstring fileNames = {
'file:/gpfs/defilippis/RelValSingleMuMinusPt1002AB97782-BC5A-DC11-828B-000423D98930.root',
'file:/gpfs/defilippis/RelValSingleMuMinusPt100C4109F7D-7560-DC11-A709-001A928116FE.root',
'file:/gpfs/defilippis/RelValSingleMuMinusPt1002AB97782-BC5A-DC11-828B-000423D98930.root'
# '/store/mc/2007/9/10/RelVal-RelValSingleMuPlusPt100-1189464381/0000/AAC65BE5-7360-DC11-AC21-001A928116C2.root'
	}
    }

    module evtInfo = AsciiOutputModule {}

    #Geometry
    #
    include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"
    es_module = TrackerGeometricDetESModule {}


    # Include MagneticField Record
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    es_module = TrackerDigiGeometryESModule {}

    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"
    
    # replace cutsCKF.src=TrackRefitter
    # replace cutsRS.src=TrackRefitter
    
    

    # Filters
    include "Validation/RecoTrack/data/cuts.cff"

    # Track Validator    

    module misalignmentvalidation = ValidationMisalignedTracker {
     untracked bool selection_eff   = true
     untracked bool selection_fake   = true
     untracked bool ZmassSelection   = false
     VInputTag label = {cutsCKF}
     InputTag label_tp_effic = cutsTPEffic
     InputTag label_tp_fake = cutsTPFake
     vstring associators = {"TrackAssociatorByHits"}
     string  sim   = "g4SimHits"
     string  out   = "validationPlots.root"
     double  min   = 0
     double  max   = 2.5
     int32   nint  = 25
     double  minpT = 0
     double  maxpT = 100
     int32   nintpT= 200
     untracked string rootfile   = "ValidationMisalignedTracker.root"
    }

    include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"

    path p = {cutsCKF,cutsTPEffic,cutsTPFake,misalignmentvalidation}
    
    endpath ep = {
	evtInfo
    }
}
